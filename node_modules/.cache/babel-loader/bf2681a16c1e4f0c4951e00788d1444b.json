{"ast":null,"code":"import _slicedToArray from\"/Users/mariyannikolov/Documents/GitHub/BG-Baba/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/Users/mariyannikolov/Documents/GitHub/BG-Baba/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/mariyannikolov/Documents/GitHub/BG-Baba/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useReducer,useEffect,useContext}from\"react\";import{useNavigate}from\"react-router-dom\";import*as itemsService from\"../services/itemsService\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ItemContext=/*#__PURE__*/createContext();var ADD_ITEMS=\"ADD_ITEMS\";var ADD_ITEM=\"ADD_ITEM\";var FETCH_ITEM_DETAILS=\"FETCH_ITEM_DETAILS\";var EDIT_ITEM=\"EDIT_ITEM\";var ADD_COMMENT=\"ADD_COMMENT\";var REMOVE_ITEM=\"REMOVE_ITEM\";var itemReducer=function itemReducer(state,action){switch(action.type){case ADD_ITEMS:return action.payload.map(function(x){return _objectSpread(_objectSpread({},x),{},{comments:[]});});case ADD_ITEM:return[].concat(_toConsumableArray(state),[action.payload]);case FETCH_ITEM_DETAILS:case EDIT_ITEM:return state.map(function(x){return x._id===action.itemId?action.payload:x;});case ADD_COMMENT:return state.map(function(x){return x._id===action.itemId?_objectSpread(_objectSpread({},x),{},{comments:[].concat(_toConsumableArray(x.comments),[action.payload])}):x;});case REMOVE_ITEM:return state.filter(function(x){return x._id!==action.itemId;});default:return state;}};export var ItemProvider=function ItemProvider(_ref){var children=_ref.children;var navigate=useNavigate();var _useReducer=useReducer(itemReducer,[]),_useReducer2=_slicedToArray(_useReducer,2),items=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){itemsService.getAll().then(function(result){dispatch({type:ADD_ITEMS,payload:result});});},[]);var selectItem=function selectItem(itemId){return items.find(function(x){return x._id===itemId;})||{};};var fetchItemDetails=function fetchItemDetails(itemId,itemDetails){dispatch({type:FETCH_ITEM_DETAILS,payload:itemDetails,itemId:itemId});};var addComment=function addComment(itemId,comment){dispatch({type:ADD_COMMENT,payload:comment,itemId:itemId});};var addItem=function addItem(itemData){dispatch({type:ADD_ITEM,payload:itemData});navigate(\"/items\");};var editItem=function editItem(itemId,itemData){dispatch({type:EDIT_ITEM,payload:itemData,itemId:itemId});};var removeItem=function removeItem(itemId){dispatch({type:REMOVE_ITEM,itemId:itemId});};return/*#__PURE__*/_jsx(ItemContext.Provider,{value:{items:items,addItem:addItem,editItem:editItem,addComment:addComment,fetchItemDetails:fetchItemDetails,selectItem:selectItem,removeItem:removeItem},children:children});};export var useItemContext=function useItemContext(){var context=useContext(ItemContext);return context;};","map":{"version":3,"names":["createContext","useReducer","useEffect","useContext","useNavigate","itemsService","ItemContext","ADD_ITEMS","ADD_ITEM","FETCH_ITEM_DETAILS","EDIT_ITEM","ADD_COMMENT","REMOVE_ITEM","itemReducer","state","action","type","payload","map","x","comments","_id","itemId","filter","ItemProvider","children","navigate","items","dispatch","getAll","then","result","selectItem","find","fetchItemDetails","itemDetails","addComment","comment","addItem","itemData","editItem","removeItem","useItemContext","context"],"sources":["/Users/mariyannikolov/Documents/GitHub/BG-Baba/src/contexts/ItemContext.js"],"sourcesContent":["import { createContext, useReducer, useEffect, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as itemsService from \"../services/itemsService\";\n\nexport const ItemContext = createContext();\n\nconst ADD_ITEMS = \"ADD_ITEMS\";\nconst ADD_ITEM = \"ADD_ITEM\";\nconst FETCH_ITEM_DETAILS = \"FETCH_ITEM_DETAILS\";\nconst EDIT_ITEM = \"EDIT_ITEM\";\nconst ADD_COMMENT = \"ADD_COMMENT\";\nconst REMOVE_ITEM = \"REMOVE_ITEM\";\n\nconst itemReducer = (state, action) => {\n  switch (action.type) {\n    case ADD_ITEMS:\n      return action.payload.map(x => ({ ...x, comments: [] }));\n    case ADD_ITEM:\n      return [...state, action.payload];\n    case FETCH_ITEM_DETAILS:\n    case EDIT_ITEM:\n      return state.map((x) => (x._id === action.itemId ? action.payload : x));\n    case ADD_COMMENT:\n      return state.map((x) =>\n        x._id === action.itemId\n          ? { ...x, comments: [...x.comments, action.payload] }\n          : x\n      );\n    case REMOVE_ITEM:\n      return state.filter((x) => x._id !== action.itemId);\n    default:\n      return state;\n  }\n};\n\nexport const ItemProvider = ({ children }) => {\n  const navigate = useNavigate();\n  const [items, dispatch] = useReducer(itemReducer, []);\n\n  useEffect(() => {\n    itemsService.getAll().then(result => {\n      dispatch({        \n        type: ADD_ITEMS,\n        payload: result,\n      });\n    });\n  }, []);\n\n  const selectItem = (itemId) => {\n    return items.find(x => x._id === itemId) || {};\n  };\n\n  const fetchItemDetails = (itemId, itemDetails) => {\n    dispatch({\n      type: FETCH_ITEM_DETAILS,\n      payload: itemDetails,\n      itemId,\n    });\n  };\n\n  const addComment = (itemId, comment) => {\n    dispatch({\n      type: ADD_COMMENT,\n      payload: comment,\n      itemId,\n    });\n  };\n\n  const addItem = (itemData) => {\n    dispatch({\n      type: ADD_ITEM,\n      payload: itemData,\n    });\n\n    navigate(\"/items\");\n  };\n\n  const editItem = (itemId, itemData) => {\n    dispatch({\n      type: EDIT_ITEM,\n      payload: itemData,\n      itemId,\n    });\n  };\n\n  const removeItem = (itemId) => {\n    dispatch({\n      type: REMOVE_ITEM,\n      itemId,\n    });\n  };\n  return (\n    <ItemContext.Provider\n      value={{\n        items,\n        addItem,\n        editItem,\n        addComment,\n        fetchItemDetails,\n        selectItem,\n        removeItem,\n      }}\n    >\n      {children}\n    </ItemContext.Provider>\n  );\n};\n\nexport const useItemContext = () => {\n    const context = useContext(ItemContext);\n\n    return context;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}