{"ast":null,"code":"var _jsxFileName = \"/Users/mariyannikolov/Documents/GitHub/BG-Baba/src/contexts/ItemContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport * as itemsService from '../services/itemsService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ItemContext = /*#__PURE__*/createContext();\nconst ADD_ITEMS = \"ADD_ITEMS\";\nconst ADD_ITEM = \"ADD_ITEMS\";\nconst FETCH_ITEM_DETAILS = \"FETCH_ITEM_DETAILS\";\nconst EDIT_ITEM = \"EDIT_ITEM\";\nconst ADD_COMMENT = \"ADD_COMMENT\";\nconst REMOVE_ITEM = \"REMOVE_ITEM\";\n\nconst itemReducer = (state, action) => {\n  switch (action.type) {\n    case ADD_ITEMS:\n      return action.payload.map(x => ({ ...x,\n        comments: []\n      }));\n\n    case ADD_ITEM:\n      return [...state, action.payload];\n\n    case FETCH_ITEM_DETAILS:\n    case EDIT_ITEM:\n      return state.map(x => x._id === action.itemId ? action.payload : x);\n\n    case ADD_COMMENT:\n      return state.map(x => x._id === action.itemId ? { ...x,\n        comments: [...x.comments, action.payload]\n      } : x);\n\n    case REMOVE_ITEM:\n      return state.filter(x => x._id !== action.itemId);\n\n    default:\n      return state;\n  }\n};\n\nexport const ItemProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const navigate = useNavigate();\n  const [items, dispatch] = useReducer(itemReducer, []);\n  useEffect(() => {\n    itemsService.getAll().then(result => {\n      const action = {\n        type: ADD_ITEMS,\n        payload: result\n      };\n      dispatch(action);\n    });\n  }, []);\n\n  const selectItem = itemId => {\n    return items.find(x => x._id === itemId) || {};\n  };\n\n  const fetchItemDetails = (itemId, itemDetails) => {\n    dispatch({\n      type: FETCH_ITEM_DETAILS,\n      payload: itemDetails,\n      itemId\n    });\n  };\n\n  const addComment = (itemId, comment) => {\n    dispatch({\n      type: ADD_COMMENT,\n      payload: comment,\n      itemId\n    });\n  };\n\n  const addItem = itemData => {\n    dispatch({\n      type: ADD_ITEM,\n      payload: itemData\n    });\n    navigate('/items');\n  };\n\n  const editItem = (itemId, itemData) => {\n    dispatch({\n      type: EDIT_ITEM,\n      payload: itemData,\n      itemId\n    });\n  };\n\n  const removeItem = itemId => {\n    dispatch({\n      type: REMOVE_ITEM,\n      itemId\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(ItemContext.Provider, {\n    value: {\n      items,\n      addItem,\n      editItem,\n      addComment,\n      fetchItemDetails,\n      selectItem,\n      removeItem\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ItemProvider, \"jYu54ZW2x3gn62dyJbNhwUTB8ns=\", false, function () {\n  return [useNavigate];\n});\n\n_c = ItemProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"ItemProvider\");","map":{"version":3,"names":["createContext","useReducer","useEffect","useNavigate","itemsService","ItemContext","ADD_ITEMS","ADD_ITEM","FETCH_ITEM_DETAILS","EDIT_ITEM","ADD_COMMENT","REMOVE_ITEM","itemReducer","state","action","type","payload","map","x","comments","_id","itemId","filter","ItemProvider","children","navigate","items","dispatch","getAll","then","result","selectItem","find","fetchItemDetails","itemDetails","addComment","comment","addItem","itemData","editItem","removeItem"],"sources":["/Users/mariyannikolov/Documents/GitHub/BG-Baba/src/contexts/ItemContext.js"],"sourcesContent":["import { createContext, useReducer, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport * as itemsService from '../services/itemsService';\n\n\nexport const ItemContext = createContext();\n\nconst ADD_ITEMS = \"ADD_ITEMS\";\nconst ADD_ITEM = \"ADD_ITEMS\";\nconst FETCH_ITEM_DETAILS = \"FETCH_ITEM_DETAILS\";\nconst EDIT_ITEM = \"EDIT_ITEM\";\nconst ADD_COMMENT = \"ADD_COMMENT\";\nconst REMOVE_ITEM = \"REMOVE_ITEM\";\n\nconst itemReducer = (state, action) => {\n    switch (action.type) {\n        case ADD_ITEMS:\n            return action.payload.map(x => ({ ...x, comments: [] }));\n        case ADD_ITEM:\n            return [...state, action.payload];\n        case FETCH_ITEM_DETAILS:\n        case EDIT_ITEM:\n            return state.map(x => x._id === action.itemId ? action.payload : x);\n        case ADD_COMMENT:\n            return state.map(x => x._id === action.itemId ? { ...x, comments: [...x.comments, action.payload] } : x);\n        case REMOVE_ITEM:\n            return state.filter(x => x._id !== action.itemId);\n        default:\n            return state;\n    }\n};\n\nexport const ItemProvider = ({\n    children,\n}) => {\n    const navigate = useNavigate();\n    const [items, dispatch] = useReducer(itemReducer, []);\n\n    useEffect(() => {\n        itemsService.getAll()\n            .then(result => {\n                const action = {\n                    type: ADD_ITEMS,\n                    payload: result\n                };\n\n                dispatch(action);\n            });\n    }, []);\n\n    const selectItem = (itemId) => {\n        return items.find(x => x._id === itemId) || {};\n    };\n\n    const fetchItemDetails = (itemId, itemDetails) => {\n        dispatch({\n            type: FETCH_ITEM_DETAILS,\n            payload: itemDetails,\n            itemId,\n        })\n    }\n\n    const addComment = (itemId, comment) => {\n        dispatch({\n            type: ADD_COMMENT,\n            payload: comment,\n            itemId\n        });\n\n    };\n\n    const addItem = (itemData) => {\n        dispatch({\n            type: ADD_ITEM,\n            payload: itemData,\n        })\n\n        navigate('/items');\n    };\n\n    const editItem = (itemId, itemData) => {\n        dispatch({\n            type: EDIT_ITEM,\n            payload: itemData,\n            itemId,\n        });\n    };\n\n    const removeItem = (itemId) => {\n        dispatch({\n            type: REMOVE_ITEM,\n            itemId\n        })\n    }\n    return (\n        <ItemContext.Provider value={{\n            items,\n            addItem,\n            editItem,\n            addComment,\n            fetchItemDetails,\n            selectItem,\n            removeItem\n        }}>\n            {children}\n        </ItemContext.Provider>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}