{"ast":null,"code":"import { useItemContext } from \"../contexts/ItemContext\";\nconst {\n  items\n} = useItemContext();\n\nconst request = async (method, url, data) => {\n  try {\n    const user = localStorage.getItem('auth');\n    const auth = JSON.parse(user || '{}');\n    let headers = {};\n\n    if (auth.accessToken) {\n      headers['X-Authorization'] = auth.accessToken;\n    }\n\n    let buildRequest;\n\n    if (method === 'GET' && items.length > 0) {\n      buildRequest = fetch(url, {\n        headers\n      });\n    } else {\n      buildRequest = fetch(url, {\n        method,\n        headers: { ...headers,\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      });\n    }\n\n    const response = await buildRequest;\n    console.log(response);\n    const result = await response.json();\n    return result;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const get = request.bind({}, 'GET');\nexport const post = request.bind({}, 'POST');\nexport const patch = request.bind({}, 'PATCH');\nexport const put = request.bind({}, 'PUT');\nexport const del = request.bind({}, 'DELETE');","map":{"version":3,"names":["useItemContext","items","request","method","url","data","user","localStorage","getItem","auth","JSON","parse","headers","accessToken","buildRequest","length","fetch","body","stringify","response","console","log","result","json","error","get","bind","post","patch","put","del"],"sources":["/Users/mariyannikolov/Documents/GitHub/BG-Baba/src/services/requester.js"],"sourcesContent":["import { useItemContext } from \"../contexts/ItemContext\";\nconst { items } = useItemContext();\n\nconst request = async (method, url, data) => {\n    try {\n        const user = localStorage.getItem('auth');\n        const auth = JSON.parse(user || '{}');\n\n        let headers = {}\n\n        if (auth.accessToken) {\n            headers['X-Authorization'] = auth.accessToken;\n        }\n\n        let buildRequest;\n\n        if (method === 'GET' && items.length > 0) {\n            buildRequest = fetch(url, { headers });\n        } else {\n            buildRequest = fetch(url, {\n                method,\n                headers: {\n                    ...headers,\n                    'content-type': 'application/json'\n                },\n                body: JSON.stringify(data)\n            });\n        }\n        const response = await buildRequest;\n\n        console.log(response);\n\n        const result = await response.json();\n\n        return result;\n    } catch (error) {\n        console.log(error);\n    }\n};\n\nexport const get = request.bind({}, 'GET');\nexport const post = request.bind({}, 'POST');\nexport const patch = request.bind({}, 'PATCH');\nexport const put = request.bind({}, 'PUT');\nexport const del = request.bind({}, 'DELETE');"],"mappings":"AAAA,SAASA,cAAT,QAA+B,yBAA/B;AACA,MAAM;EAAEC;AAAF,IAAYD,cAAc,EAAhC;;AAEA,MAAME,OAAO,GAAG,OAAOC,MAAP,EAAeC,GAAf,EAAoBC,IAApB,KAA6B;EACzC,IAAI;IACA,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb;IACA,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWL,IAAI,IAAI,IAAnB,CAAb;IAEA,IAAIM,OAAO,GAAG,EAAd;;IAEA,IAAIH,IAAI,CAACI,WAAT,EAAsB;MAClBD,OAAO,CAAC,iBAAD,CAAP,GAA6BH,IAAI,CAACI,WAAlC;IACH;;IAED,IAAIC,YAAJ;;IAEA,IAAIX,MAAM,KAAK,KAAX,IAAoBF,KAAK,CAACc,MAAN,GAAe,CAAvC,EAA0C;MACtCD,YAAY,GAAGE,KAAK,CAACZ,GAAD,EAAM;QAAEQ;MAAF,CAAN,CAApB;IACH,CAFD,MAEO;MACHE,YAAY,GAAGE,KAAK,CAACZ,GAAD,EAAM;QACtBD,MADsB;QAEtBS,OAAO,EAAE,EACL,GAAGA,OADE;UAEL,gBAAgB;QAFX,CAFa;QAMtBK,IAAI,EAAEP,IAAI,CAACQ,SAAL,CAAeb,IAAf;MANgB,CAAN,CAApB;IAQH;;IACD,MAAMc,QAAQ,GAAG,MAAML,YAAvB;IAEAM,OAAO,CAACC,GAAR,CAAYF,QAAZ;IAEA,MAAMG,MAAM,GAAG,MAAMH,QAAQ,CAACI,IAAT,EAArB;IAEA,OAAOD,MAAP;EACH,CA/BD,CA+BE,OAAOE,KAAP,EAAc;IACZJ,OAAO,CAACC,GAAR,CAAYG,KAAZ;EACH;AACJ,CAnCD;;AAqCA,OAAO,MAAMC,GAAG,GAAGvB,OAAO,CAACwB,IAAR,CAAa,EAAb,EAAiB,KAAjB,CAAZ;AACP,OAAO,MAAMC,IAAI,GAAGzB,OAAO,CAACwB,IAAR,CAAa,EAAb,EAAiB,MAAjB,CAAb;AACP,OAAO,MAAME,KAAK,GAAG1B,OAAO,CAACwB,IAAR,CAAa,EAAb,EAAiB,OAAjB,CAAd;AACP,OAAO,MAAMG,GAAG,GAAG3B,OAAO,CAACwB,IAAR,CAAa,EAAb,EAAiB,KAAjB,CAAZ;AACP,OAAO,MAAMI,GAAG,GAAG5B,OAAO,CAACwB,IAAR,CAAa,EAAb,EAAiB,QAAjB,CAAZ"},"metadata":{},"sourceType":"module"}