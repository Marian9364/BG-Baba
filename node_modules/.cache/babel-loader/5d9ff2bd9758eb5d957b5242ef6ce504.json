{"ast":null,"code":"var _jsxFileName = \"/Users/mariyannikolov/Documents/GitHub/BG-Baba/src/components/item-details-page/ItemDetailsPage.js\",\n    _s = $RefreshSig$();\n\nimport styles from \"./ItemDetailsPage.module.css\";\nimport \"../../reset.css\";\nimport { useEffect } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport * as itemsService from \"../../services/itemsService\";\nimport * as commentService from \"../../services/commentService\";\nimport { useItemContext } from \"../../contexts/ItemContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ItemDetailsPage = () => {\n  _s();\n\n  var _currentItem$comments;\n\n  const {\n    itemId\n  } = useParams(); // const { commentId } = useParams();\n\n  const navigate = useNavigate();\n  const {\n    addComment,\n    fetchItemDetails,\n    selectItem,\n    removeItem\n  } = useItemContext();\n  const currentItem = selectItem(itemId);\n  useEffect(() => {\n    (async () => {\n      const itemDetails = await itemsService.getOne(itemId);\n      const itemComments = await commentService.getByItemId(itemId);\n      fetchItemDetails(itemId, { ...itemDetails,\n        comments: itemComments.map(x => `${x.user.email}: ${x.text}`)\n      });\n    })();\n  }, []);\n\n  const addCommentHandler = e => {\n    e.preventDefault();\n    const formData = new FormData(e.target);\n    const comment = formData.get(\"comment\");\n\n    if (comment === \"\") {\n      alert(\"Comment can not be empty!\");\n      return;\n    }\n\n    commentService.create(itemId, comment).then(result => {\n      addComment(itemId, comment);\n    });\n    e.target.reset();\n  }; // const deleteCommentHandler = (e) => {\n  //   e.preventDefault();\n  //   commentService.remove(commentId);\n  // }\n\n\n  const deleteItemHandler = () => {\n    const confirmation = window.confirm(\"Are you sure you want to delete the item?\");\n\n    if (confirmation) {\n      itemsService.remove(itemId).then(() => {\n        removeItem(itemId);\n        navigate(\"/items\");\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.mainWrapper,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.innerWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.heading,\n        children: \"Item Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Item Type: \", currentItem.type]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: styles.img,\n        src: currentItem.img\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Size: \", currentItem.size]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Gender: \", currentItem.gender]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"price: \", currentItem.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Created by: \", currentItem.creator]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Creator's phone number: \", currentItem.phone]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.btns,\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `/items/${itemId}/edit`,\n          className: styles.editBtn,\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: deleteItemHandler,\n          className: styles.delBtn,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.commentsWrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.commentsText,\n          children: \"Comments:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          role: \"list\",\n          children: (_currentItem$comments = currentItem.comments) === null || _currentItem$comments === void 0 ? void 0 : _currentItem$comments.map(x => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: styles.comment,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: x\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 17\n            }, this)\n          }, x, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), !currentItem.comments && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No comments.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.createComment,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Add new comment:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.commentFieldAndBtn,\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            className: styles.form,\n            onSubmit: addCommentHandler,\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"comment\",\n              placeholder: \"Comment......\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: styles.btnSubmit,\n              type: \"submit\",\n              value: \"Add Comment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ItemDetailsPage, \"9oXC6Nure9/rScAWIqla282XqCg=\", false, function () {\n  return [useParams, useNavigate, useItemContext];\n});\n\n_c = ItemDetailsPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ItemDetailsPage\");","map":{"version":3,"names":["styles","useEffect","useParams","Link","useNavigate","itemsService","commentService","useItemContext","ItemDetailsPage","itemId","navigate","addComment","fetchItemDetails","selectItem","removeItem","currentItem","itemDetails","getOne","itemComments","getByItemId","comments","map","x","user","email","text","addCommentHandler","e","preventDefault","formData","FormData","target","comment","get","alert","create","then","result","reset","deleteItemHandler","confirmation","window","confirm","remove","mainWrapper","innerWrapper","heading","type","img","size","gender","price","creator","phone","btns","editBtn","delBtn","commentsWrapper","commentsText","createComment","commentFieldAndBtn","form","btnSubmit"],"sources":["/Users/mariyannikolov/Documents/GitHub/BG-Baba/src/components/item-details-page/ItemDetailsPage.js"],"sourcesContent":["import styles from \"./ItemDetailsPage.module.css\";\nimport \"../../reset.css\"\nimport { useEffect } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport * as itemsService from \"../../services/itemsService\";\nimport * as commentService from \"../../services/commentService\";\nimport { useItemContext } from \"../../contexts/ItemContext\";\n\n\nexport const ItemDetailsPage = () => {\n  const { itemId } = useParams();\n  // const { commentId } = useParams();\n  const navigate = useNavigate();\n  const { addComment, fetchItemDetails, selectItem, removeItem } = useItemContext();\n  const currentItem = selectItem(itemId);\n\n  useEffect(() => {\n    (async () => {\n      const itemDetails = await itemsService.getOne(itemId);\n      const itemComments = await commentService.getByItemId(itemId);\n\n      fetchItemDetails(itemId, {\n        ...itemDetails,\n        comments: itemComments.map(x => `${x.user.email}: ${x.text}`),\n      });\n    })();\n  }, []);\n\n  const addCommentHandler = (e) => {\n    e.preventDefault();\n    const formData = new FormData(e.target);\n\n    const comment = formData.get(\"comment\");\n    if(comment === \"\"){\n      alert(\"Comment can not be empty!\");\n      return\n    }\n    \n\n    commentService.create(itemId, comment).then(result => {\n      addComment(itemId, comment);\n    });\n    e.target.reset()\n\n  };\n\n  // const deleteCommentHandler = (e) => {\n  //   e.preventDefault();\n  //   commentService.remove(commentId);\n\n  // }\n\n  const deleteItemHandler = () => {\n    const confirmation = window.confirm(\n      \"Are you sure you want to delete the item?\"\n    );\n\n    if (confirmation) {\n      itemsService.remove(itemId).then(() => {\n        removeItem(itemId);\n        navigate(\"/items\");\n      });\n    }\n  };\n\n\n  return (\n    <div className={styles.mainWrapper}>\n      <div className={styles.innerWrapper}>\n        <h1 className={styles.heading}>Item Details</h1>\n        <h1>Item Type: {currentItem.type}</h1>\n        <img className={styles.img} src={currentItem.img} />\n        <h4>Size: {currentItem.size}</h4>\n        <h4>Gender: {currentItem.gender}</h4>\n        <h4>price: {currentItem.price}</h4>\n        <h2>Created by: {currentItem.creator}</h2>\n        <h2>Creator's phone number: {currentItem.phone}</h2>\n        <div className={styles.btns}>\n          <Link to={`/items/${itemId}/edit`} className={styles.editBtn}>\n            Edit\n          </Link>\n          <button onClick={deleteItemHandler} className={styles.delBtn}>\n            Delete\n          </button>\n        </div>\n        <div className={styles.commentsWrapper}>\n          <h2 className={styles.commentsText}>Comments:</h2>\n          <ul role=\"list\">\n            {currentItem.comments?.map((x) => (\n              <li key={x} className={styles.comment}>\n                <p>{x}</p>\n                {/* <button onClick={deleteCommentHandler}>x</button> */}\n              </li>\n            ))}\n          </ul>\n\n          {!currentItem.comments && <p>No comments.</p>}\n        </div>\n        <div className={styles.createComment}>\n          <label>Add new comment:</label>\n          <div className={styles.commentFieldAndBtn}>\n          <form className={styles.form} onSubmit={addCommentHandler}>\n            <textarea name=\"comment\" placeholder=\"Comment......\" />\n\n            <input\n              className={styles.btnSubmit}\n              type=\"submit\"\n              value=\"Add Comment\"\n            />\n          </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}